<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>Multi-Petabyte Data Distribution in Industry & Science with CernVM File System</title>

		<link rel="stylesheet" href="dist/reset.css">
		<link rel="stylesheet" href="dist/reveal.css">
		<link rel="stylesheet" href="dist/theme/white-fosdem-ish.css">
		<link rel="stylesheet" type="text/css" href="css/asciinema-player.css" />

		<!-- Theme used for syntax highlighted code -->
		<link rel="stylesheet" href="plugin/highlight/monokai.css">
	</head>
	<body>
		<div class="reveal">
			<div class="slides">
				<section data-auto-animate>
					<!--
						QR code generation command:
						qrencode -s 4 -o assets/img/this-talk-schedule.qr.png https://fosdem.org/2026/schedule/event/9YET9Y-cvmfs/
						qrencode -s 4 -o assets/img/this-talk-slides.qr.png https://autkin.net/talks/cvmfs-fosdem26-talk/slides/
					-->
					<img src="assets/img/fosdem-gear.svg">
					<div id="talk-title">
						Multi-Petabyte Data Distribution in Industry & Science with CernVM File System
					</div>
					<br>

					<div id="title-slide-footer">
						<ul style="list-style-type: none;">
							<li>Georgios Christodoulis, CERN</li>
							<li>Andriy Utkin</li>
						</ul>
						<center><small>2026</small></center>
						<div>
							Slides:
							<img src="assets/img/this-talk-slides.qr.png" style="vertical-align:middle">
						</div>
					</div>
				</section>

				<section data-auto-animate>
					<img src="assets/img/fosdem-gear.svg">

					<div id="talk-title">
						<h1 style="font-size: 300px">CVMFS</h1>
					</div>
					<br>
					<br>
					<br>
					<br>

					<div id="title-slide-footer">
						<ul style="list-style-type: none;">
							<li>Georgios Christodoulis, CERN</li>
							<li>Andriy Utkin</li>
						</ul>
						<center><small>2026</small></center>
						<div>
							Slides:
							<img src="assets/img/this-talk-slides.qr.png" style="vertical-align:middle">
						</div>
					</div>
				</section>

				<section data-markdown>
					<!--
						QR code generation command:
						qrencode -s 4 -o assets/img/bof-schedule.qr.png https://fosdem.org/2026/schedule/event/W93GZR-cvmfs-install-party/
					-->
					<textarea data-template>
					## CVMFS install party + adoption Q&A (BOF)

					[![](assets/img/bof-schedule.png)](https://fosdem.org/2026/schedule/event/W93GZR-cvmfs-install-party/)

					<div>
						Event:
						<img src="assets/img/bof-schedule.qr.png" style="vertical-align:middle">
					</div>

					</textarea>
				</section>

				<section data-markdown>
					<textarea data-template>
						## Open Source at CERN

						stand @ K level 1 (group A)

						![map](assets/img/map-k1.png)
					</textarea>
				</section>


				<section data-markdown>
					<textarea data-template>
						# George's slides
					</textarea>
				</section>

				<section data-markdown>
					<textarea data-template>
					## cvmfs-posix-tools

					<aside class="notes">
						These are new tools, modelled after popular file utilities, which offer the convenience of direct effect on CVMFS repo.

					   	Can be seen as easier to use tools.

						They provide speedups in some modes.

						They can help avoid running out of disk space in scratch area.
					</aside>

					<!-- Deemphasize common prefix, emphasize second half of command names -->
					<ul style="columns: 2; list-style-type: none;">
						<li>cvmfs_<strong>chgrp</strong></li>
						<li>cvmfs_<strong>chmod</strong></li>
						<li>cvmfs_<strong>chown</strong></li>
						<li>cvmfs_<strong>insert</strong></li>
						<li>cvmfs_<strong>ln</strong></li>
						<li>cvmfs_<strong>mkdir</strong></li>
						<li>cvmfs_<strong>rm</strong></li>
						<li>cvmfs_<strong>rmdir</strong></li>
						<li>cvmfs_<strong>rsync</strong></li>
						<li>cvmfs_<strong>setfacl</strong></li>
						<li>cvmfs_<strong>touch</strong></li>
					</ul>

					</textarea>
				</section>
				<section data-markdown>
					<textarea data-template>
						## Changing contents,<br>the usual way

						* `cvmfs_server transaction`
						* make changes
						* `cvmfs_server publish`

						<aside class="notes">
							To explain why they are needed, let's briefly see how changing contents <strong>currently</strong> works from the user perspective.

							The first method you learn from the documentation to change the contents of your repo is this:

							* `cvmfs_server transaction`
							* make changes
							* `cvmfs_server publish`

						</aside>
					</textarea>
				</section>

				<!--
				<section>
					<aside class="notes">
					</aside>

					How publishing looks

					<iframe src='publish-demo.html'
						width="1920px" height="1080px"
					>
					</iframe>
				</section>
				-->
				<section>
					<aside class="notes">
						This is publish method adding a 4 Gigabyte file into an S3-backed CVMFS repository.
					</aside>

					Publish command in action

					<iframe src='demo-publish-bigmodel.html'
							width="1920px" height="1080px"
					>
					</iframe>
				</section>

				<section data-markdown>
					<textarea data-template>
						<aside class="notes">
							Importantly, in this way, two expensive steps must occur to accomplish the task of publishing a new file.

							First, the new file is copied into local scratch area.

							SKIPPABLE BEGIN

							This is dealt by overlayfs, it provides a nice illusion of editing the filesystem directly, and it enables the next step, the publish command, to instantly see what are the changed files to upload.

							SKIPPABLE END

							Second, the copy in the scratch area is transferred to the primary storage of CVMFS repo.

							It can be a local directory if we are working directly on the main server, called Stratum 0.

							It can be S3 location.

							And it can be a remote CVMFS server, running a so called Gateway service.
						</aside>

						<table width="100%">
							<tr width="100%">
								<td width="75%">
									<code style="white-space: nowrap;">cvmfs_server transaction</code>
								</td>
								<td width="25%">
									change overlayfs mode
								</td>
							</tr>
							<tr width="100%">
								<td width="75%">
									<code style="white-space: nowrap;">cp bigmodel.gguf /cvmfs/my.repo</code>
								</td>
								<td width="25%">
									copy to scratch area
								</td>
							</tr>
							<tr width="100%">
								<td width="60%">
									<code style="white-space: nowrap;">cvmfs_server publish</code>
								</td>
								<td width="25%">
									copy to primary storage
								</td>
							</tr>
						</table>

					</textarea>
				</section>

				<section>
					<aside class="notes">
					    You can also choose whether to store new files in Content Addressable Storage fashion, or
						represent the tree hierarchy and original filenames in S3 locations.
					</aside>

					cvmfs_rsync in action

					<iframe src='demo-cvmfs_rsync-external-faster-plus-s3-listing.html'
						width="1920px" height="1080px"
					>
					</iframe>
				</section>


				<section data-markdown>
					<textarea data-template>
						## cvmfs-posix-tools:<br>under the hood

						- uploads all the new files to S3 directly
						- pushes metadata changes to CVMFS Gateway host
						- waits for new CVMFS revision to become visible

					</textarea>
				</section>

				<section data-markdown>
					<textarea data-template>
						## Lazy-pulling<br>container images

					</textarea>
				</section>

				<section>
					<aside class="notes">
						Here we use the lazy pulling.

						Here we use a popular image slightly bigger than 1 Gigabyte.

						This image is developed and distributed by and for scientists, and is somewhat popular.

						It takes 25 seconds to fetch whatever is strictly necessary and execute the python process which
						loads the target module.

						Afterwards, the CVMFS cache is 600 Megabytes.
						So we skipped downloading quite a lot.
					</aside>

					Lazy pulling in action

					<iframe src='demo-lazy-pulling-1.html'
						width="1920px" height="1080px"
					>
					</iframe>
				</section>

				<section>
					<aside class="notes">
						You can, of course, use the same container image the usual way: issue a normal podman run
						command and let it download the image.

						This demo was recorded on a very fast connection, by the way, the uplink is upward of a gigabit.

						(Wait for the animation to end with the "no space left on device")

						Unless it doesn't fit on your disk, in which case you'd have to go on a cleanup diversion or
						resize your machine.
					</aside>

					Normal image pulling

					<iframe src='demo-lazy-pulling-2.html'
						width="1920px" height="1080px"
					>
					</iframe>
				</section>

				<section>
						<h2>Q & A</h2>
						<center>
						<table width=100%>
							<tr>
								<td>
									Georgios Christodoulis, CERN<br>
									<span style="font-style: italic">georgios.christodoulis@cern.ch</span>
								</td>
								<td>
									Andriy Utkin<br>
									<span style="font-style: italic">hello@autkin.net</span>
								</td>
							</tr>
							<tr>
								<td colspan="2">
									<img src="assets/img/bof-schedule.png" width="70%">

								</td>
							</tr>
							<tr>
								<td>
									Open&nbsp;Source&nbsp;at&nbsp;CERN
								</td>
								<td>
									<img src="assets/img/map-k1.png" width="70%" style="vertical-align:middle">
								</td>
							</tr>
						</table>
						</center>
				</section>

				<section data-markdown>
					<!--
						QR code generation command:
						qrencode -s 4 -o assets/img/bof-schedule.qr.png https://fosdem.org/2026/schedule/event/W93GZR-cvmfs-install-party/
					-->
					<textarea data-template>
					## CVMFS install party + adoption Q&A (BOF)

					[![](assets/img/bof-schedule.png)](https://fosdem.org/2026/schedule/event/W93GZR-cvmfs-install-party/)

					<div>
						Event:
						<img src="assets/img/bof-schedule.qr.png" style="vertical-align:middle">
					</div>

					</textarea>
				</section>

				<section data-markdown>
					<textarea data-template>
						## Open Source at CERN

						stand @ K level 1 (group A)

						![map](assets/img/map-k1.png)
					</textarea>
				</section>

				<section data-markdown>
					<textarea data-template>
					## Backup slides

					TODO

					</textarea>
				</section>

				<section data-markdown>
					<textarea data-template>
					## References

					TODO

					<!--
					autkin demos: https://forge.autkin.net/autkin/cvmfs-fosdem26-demos
					-->
					</textarea>
				</section>
			</div>
		</div>

		<script src="dist/reveal.js"></script>
		<script src="plugin/notes/notes.js"></script>
		<script src="plugin/markdown/markdown.js"></script>
		<script src="plugin/highlight/highlight.js"></script>
		<script src="js/asciinema-player.min.js"></script>
		<script>
			// More info about initialization & config:
			// - https://revealjs.com/initialization/
			// - https://revealjs.com/config/
			Reveal.initialize({
				hash: true,
				slideNumber: true,

				// Learn about plugins: https://revealjs.com/plugins/
				plugins: [ RevealMarkdown, RevealHighlight, RevealNotes ]
			});
			// https://github.com/mickaelbaron/revealasciinema/blob/master/workaround.html
			// https://discourse.asciinema.org/t/asciinema-reveal-js-display-issue/618/3
			/*
			{
				const asciinemas = document.getElementsByClassName("asciinema");
				for (let i = 0; i < asciinemas.length; i++) {
					const img = document.createElement("img");
					img.setAttribute("src", "assets/img/asciinema-player-icon.svg");
					asciinemas[i].appendChild(img);
				}
			}
			*/
			function checkForCasts(event) {
				const asciinema =
					event.currentSlide.getElementsByClassName("asciinema")[0];
				if (asciinema) {
					const filename = asciinema.getAttribute("file");
					if (asciinema && !asciinema.playerObject) {
						// Remove image
						const firstelementChild = asciinema.firstElementChild;
						if (firstelementChild) {
							asciinema.firstElementChild.remove();
						}

						asciinema.playerObject = AsciinemaPlayer.create(
							filename,
							asciinema,
							{ fit: "none" }
						);
					}
				}
			}
			Reveal.on("ready", checkForCasts);
			Reveal.on("slidechanged", checkForCasts);
		</script>
	</body>
</html>
